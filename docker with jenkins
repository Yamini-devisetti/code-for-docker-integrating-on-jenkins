pipeline{

    agent any
    tools{
        maven 'mymaven'
    }
    stages{
        stage('checkout code')
        {
            steps{ 
            git 'url'
        }
        }

    stage('Test the code'){
        steps{
            sh 'mvn test'
        }

    }
    stage('build the code'){
        steps{
            sh 'mvn package'
        }
    }
stage('Build the Image'){
        steps{
            sh 'docker build -t myimageaddressbook .'
        }
    }
stage('Deploy the code'){
        steps{
            sh 'docker run -d -P myimageaddressbook'
        }
    }
    }
}
